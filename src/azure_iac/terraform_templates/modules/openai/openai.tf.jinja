# Create a Cognitive Services Account of the kind of OpenAI 

resource "azurerm_cognitive_account" "{{engine.module_name}}" {
	name				=	"{{engine.module_params_name}}"
	location			=	azurerm_resource_group.rg.location
	resource_group_name	=	azurerm_resource_group.rg.name
	kind				=	"OpenAI"

	sku_name = "S0"
}

# Create a Cognitive Services Account Deployment

resource "azurerm_cognitive_deployment" "{{engine.module_name}}" {
    name                 = "{{engine.module_params_name}}-model"
    cognitive_account_id = azurerm_cognitive_account.{{engine.module_name}}.id
    model {
        format  = "OpenAI"
        name    = "gpt-4"
    }

    scale {
        type = "Standard"
    }
}