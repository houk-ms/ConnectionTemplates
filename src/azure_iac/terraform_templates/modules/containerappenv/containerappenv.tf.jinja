# Create an Azure Container App Environment

resource "azurerm_container_app_environment" "{{engine.module_name}}" {
	name						=	"{{engine.module_params_name}}"
	location					=	azurerm_resource_group.rg.location
	resource_group_name			=	azurerm_resource_group.rg.name
	log_analytics_workspace_id	=	azurerm_log_analytics_workspace.log.id
}

# Create an Azure Log Analytics Workspace

resource "azurerm_log_analytics_workspace" "log" {
	name				=	"log${var.resource_suffix}"
	location			=	azurerm_resource_group.rg.location
	resource_group_name	=	azurerm_resource_group.rg.name
	sku					=	"PerGB2018"
	retention_in_days	=	30
}