{% for ip in engine.module_params_allow_ips %}resource "azurerm_mysql_flexible_server_firewall_rule" "{{engine.module_name}}" {
    for_each = toset({{ip}})

    name                = "{{engine.module_params_name}}-rule"
    resource_group_name = azurerm_resource_group.rg.name
    server_name         = azurerm_mysql_flexible_server.{{engine.params_parent_module_name}}.name
    start_ip_address    = each.key
    end_ip_address      = each.key
}
{% endfor %}

