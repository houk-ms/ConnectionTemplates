{
  "resources": [
    {
      "type": "azurecontainerapp",
      "instances": [
        {
          "name": "api"
        }
      ]
    },
	{
		"type": "azureappservice",
		"instances": [
			{
				"name": "ser"
			}
		]
	},
    {
      "type": "azureapplicationinsights",
      "instances": [
        {
          "name": "todo"
        }
      ]
    },
    {
      "type": "azurekeyvault",
      "instances": [
        {
          "name": "todo"
        }
      ]
    },
    {
      "type": "azurecosmosdb",
      "instances": [
        {
          "name": "todo"
        }
      ]
    }
  ],
  "bindings": [
	{
		"source": "${azureappservice.ser}",
		"target": "${azurecosmosdb.todo}",
		"connection": "secret",
		"store": "${azurekeyvault.todo}",
		"key": "AZURE_azurecosmosdb_CONNECTION_STRING"
	},
    {
      "source": "${azurecontainerapp.api}",
      "target": "${azureapplicationinsights.todo}",
      "connection": "secret",
      "key": "APPLICATIONINSIGHTS_CONNECTION_STRING"
    },
    {
      "source": "${azureappservice.ser}",
      "target": "${azurekeyvault.todo}",
      "connection": "system-identity",
      "key": "AZURE_KEY_VAULT_ENDPOINT"
    },
    {
      "source": "${azureappservice.ser}",
      "target": "${azureapplicationinsights.todo}",
      "connection": "secret",
      "key": "APPLICATIONINSIGHTS_CONNECTION_STRING"
    },
	{
		"source": "${azurecontainerapp.api}",
		"target": "${azureappservice.ser}",
		"connection": "http",
		"key": "SERVICE_ser_URL"
	}
  ],
  "services": [
    {
      "name": "${azurecontainerapp.api}",
      "language": "ts",
      "project": "src/api"
    },
    {
      "name": "${azureappservice.ser}",
      "language": "ts",
      "project": "src/ser"
    }
  ]
}